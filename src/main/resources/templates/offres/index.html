<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout">
<head>
    <meta charset="UTF-8"/>
    <title>Offres</title>
</head>
<body>

<th:block layout:fragment="content">

    <div class="row">
        <div class="col-md-4">
            <div class="card-box recherche">
                RECHERCHE NORMALEMENT
            </div>
        </div>
        <div class="col-xs-8">
            <!--<th:block th:each="offre :${offres}">-->
                <!--<div th:replace="offres/indexFragments/offre :: offre(${offre})">-->
                    <!--liste offres-->
                <!--</div>-->
            <!--</th:block>-->
            <div id="offresDiv">

            </div>
        </div>
    </div>

</th:block>

<th:block layout:fragment="script">

    <!-- SCRIPT AFFICHAGE OFFRES -->
    <script>

        (function (container) {

            const offresLoader = {
                url: "offres/load?",
                params: {
                    page: 0,
                    size: 2
                },
                load: function () {
                    const url = this.url + $.param(this.params);
                    let params = this.params;
                    $.get(url,
                            function (data, status) {
                                if(status === "success") {
                                    params.page ++;

                                    data.offres.forEach(function(offre) {
                                        console.log(offre.title + '\n');
                                    });
                                }
                            });
                }
            };

            offresLoader.load();

        })($('#offresDiv'));
    </script>
</th:block>


</body>
</html>